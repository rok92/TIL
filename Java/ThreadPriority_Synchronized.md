### 스레드 우선순위 / 동기화 메소드&블록

> 멀티스레드 동시성 : 멀티 작업을 위해 하나의 코어에서 멀티 스레드가 번갈아가면서 실행하는 성질
>
> 멀티스레드 병렬성 : 멀티 작업을 위해 멀티 코어에서 개별 스레드를 동시에 실행하는 성질

- **스레드의 우선순위!!**

- 자바 스레드 스케줄링

  - **우선순위(Priority) 방식**

    - 우선순위가 높은 스레드가 실행 상태를 더 많이 가지도록 스케줄링 하는 것

    - 스레드 객체에 우선 순위 번호를 부여할 수 있기 때문에 개발자가 코드로 제어 가능

    - 1 - 10 까지 우선순위 부여되고 1이 가장 낮고 10이 가장 높음

    - 우선순위 부여하지 않으면 기본적으로 5의 우선순위 할당

    - setPriority() 메소드를 이용하면 우선순위 변경 가능

      ```java
      thread.setPriority("우선순위");
      ```

    - Thread 클래스의 상수 사용 가능

    - MAX : 10 / NORMAL : 5 / MIN : 1의 값을 가짐

      ```java
      thread.setPriority(Thread.MAX_PRIORITY);
      thread.setPriority(Thread.NORMAL_PRIORITY);
      thread.setPriority(Thread.MIN_PRIORITY);
      ```

  - **순환 할당(Round-Robin) 방식**

    - 시간 할당량을 정하여 하나의 스레드를 정해진 시간만큼 실행하고 다시 다른 스레드를 실행하는 방식
    - 자바 가상 기계에 의해서 정해지기 때문에 코드로 제어 불가능

- **동기화 메소드와 동기화 블록**

  - **공유 객체를 사용할 때 주의할 점**

    - 멀티 스레드에서는 한 객체를 공유해서 작업하는 경우가 많은데 이 경우 스레드A를 사용하던 객체가 스레드B에의해 상태가 변경 될 수 있음
    - 동기화가 필요한 이유이다. 

  - **동기화 메소드 및 동기화 블록**

    - 스레드가 사용중인 객체를 다른 스레드가 변경할 수 없도록 잠금을 걸어야 한다.

    - 임계영역(critical section) : 멀티 스레드 프로그램에서 단 하나의 스레드만 실행할 수 있는 코드영역

    - 임계영역을 지정하기 위해 자바는 동기화(synchronized)메소드와 동기화 블록을 제공

    - 동기화 메소드를 실행하는 즉시 객체에는 잠금이 일어남

    - 선언하는 방법

      ```java
      public synchronized void method(){
          임계영역(단 하나의 스레드만 실행)
      }
      ```

    - 메소드 전체가 아닌 일부 내용만 임계영역을 지정하고 싶으면 블록을 만들어 사용하면 된다.(동기화블록)

      ```
      public void method(){
      	여러개의 스레드 실행가능 영역
      	synchronized(공유객채){
      	임계영역(단 하나의 스레드만 실행)
      	}
      	여러개의 스레드 실행가능 영역
      }